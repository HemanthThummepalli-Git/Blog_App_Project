{"ast":null,"code":"import React from'react';import{useLocation}from'react-router-dom';import{useForm}from'react-hook-form';import{useSelector}from'react-redux';import axios from'axios';import{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Article(){let{handleSubmit,register}=useForm();let{currentUser,usertype}=useSelector(state=>state.userAuthorReducer);let[comment,setComment]=useState(\"\");//get token from the local storage\nlet token=localStorage.getItem('token');//create the axios with token\nlet axiosWithToken=axios.create({headers:{Authorization:\"Bearer \".concat(token)}});let{state}=useLocation();async function writeComment(obj){obj.username=currentUser.username;//post the http request\nlet res=await axiosWithToken.post(\"http://localhost:4000/user-api/comment/\".concat(state.articleId),obj);if(res.data.message==\"Comment is added\"){setComment(\"Comment is Posted\");}}return/*#__PURE__*/_jsxs(\"div\",{className:\"card m-5 p-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"\",children:state.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-4 mt-3 mb-3\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"fs-6\",children:[\"Created On: \",/*#__PURE__*/_jsx(\"span\",{children:state.dateOfCreation})]}),/*#__PURE__*/_jsxs(\"h5\",{className:\"fs-6\",children:[\"Modified On: \",/*#__PURE__*/_jsx(\"span\",{children:state.dateOfModification})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 mb-3\",children:usertype==\"Author\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"me-2 btn btn-warning \",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"me-2 btn btn-warning \",children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"p\",{style:{whiteSpace:\"pre-line\"},children:state.Content}),\"((state.comments.length)===0)\",/*#__PURE__*/_jsx(\"h2\",{className:\"m-2\",children:\"No comments yet...\"}),\":\",/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"m-2\",children:\"Comments:\"}),state.comments.map((commentObj,ind)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-secondary p-3 rounded-2\",children:[/*#__PURE__*/_jsx(\"h3\",{children:commentObj.username}),/*#__PURE__*/_jsx(\"p\",{className:\"fs-2\",children:commentObj.comment})]},ind))]}),/*#__PURE__*/_jsx(\"h3\",{className:\"m-2\",children:comment}),usertype==\"User\"&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(writeComment),children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register(\"comment\"),className:\"form-control mb-4 \",placeholder:\"Write comment here....\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success\",children:\"Add a Comment\"})]})]});}export default Article;","map":{"version":3,"names":["React","useLocation","useForm","useSelector","axios","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Article","handleSubmit","register","currentUser","usertype","state","userAuthorReducer","comment","setComment","token","localStorage","getItem","axiosWithToken","create","headers","Authorization","concat","writeComment","obj","username","res","post","articleId","data","message","className","children","title","dateOfCreation","dateOfModification","style","whiteSpace","Content","comments","map","commentObj","ind","onSubmit","type","placeholder"],"sources":["C:/Users/heman/blog_app/blog_appclient/src/components/Article.js"],"sourcesContent":["import React from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\nimport { useForm } from 'react-hook-form'\r\nimport { useSelector } from 'react-redux'\r\nimport axios from 'axios'\r\nimport { useState } from 'react'\r\n\r\nfunction Article() {\r\n\r\n  let {handleSubmit,register}=useForm()\r\n  let {currentUser,usertype}=useSelector(state=>state.userAuthorReducer)\r\n  let [comment,setComment]=useState(\"\")\r\n  //get token from the local storage\r\n  let token = localStorage.getItem('token')\r\n  //create the axios with token\r\n  let axiosWithToken=axios.create({\r\n      headers:{Authorization:`Bearer ${token}`}\r\n  })\r\n\r\n  let {state}=useLocation()\r\n\r\n  async function writeComment(obj){\r\n    obj.username=currentUser.username\r\n    //post the http request\r\n    let res=await axiosWithToken.post(`http://localhost:4000/user-api/comment/${state.articleId}`,obj)\r\n    if(res.data.message==\"Comment is added\"){\r\n      setComment(\"Comment is Posted\")\r\n    }\r\n  }\r\n  return (\r\n    \r\n    <div className='card m-5 p-4'>\r\n    <h1 className=\"\">{state.title}</h1>\r\n    <div className='d-flex gap-4 mt-3 mb-3'>\r\n    <h5 className='fs-6'>Created On: <span>{state.dateOfCreation}</span></h5>\r\n    <h5 className='fs-6'>Modified On: <span>{state.dateOfModification}</span></h5>\r\n    </div>\r\n    <div className='mt-3 mb-3'>\r\n              {usertype == \"Author\" && (\r\n                <>\r\n                  <button\r\n                    className=\"me-2 btn btn-warning \"\r\n                  >\r\n                    Edit\r\n                  </button>\r\n                  <button\r\n                    className=\"me-2 btn btn-warning \"\r\n                  >\r\n                    Delete\r\n                  </button>\r\n                </>\r\n              )}\r\n            </div>\r\n    <p style={{ whiteSpace: \"pre-line\" }}>\r\n      {state.Content}\r\n    </p>\r\n\r\n    ((state.comments.length)===0){\r\n      <h2 className='m-2'>No comments yet...</h2>\r\n    }:{\r\n      <div>\r\n      <h2 className='m-2'>Comments:</h2>\r\n      {\r\n        state.comments.map((commentObj,ind)=><div key={ind} className='bg-secondary p-3 rounded-2'> \r\n        \r\n                  <h3>{commentObj.username}</h3>\r\n\r\n                  <p className='fs-2'>{commentObj.comment}</p>\r\n                </div>)\r\n      }\r\n    </div>\r\n    }\r\n        \r\n\r\n\r\n    <h3 className='m-2'>{comment}</h3>\r\n        {usertype == \"User\" && (\r\n              <form onSubmit={handleSubmit(writeComment)}>\r\n                <input\r\n                  type=\"text\"\r\n                  {...register(\"comment\")}\r\n                  className=\"form-control mb-4 \"\r\n                  placeholder=\"Write comment here....\"\r\n                />\r\n                <button type=\"submit\" className=\"btn btn-success\">\r\n                  Add a Comment \r\n                </button>\r\n              </form>\r\n            )}\r\n  </div>\r\n           \r\n  )\r\n}\r\n\r\nexport default Article"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}