{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useSelector}from'react-redux';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function FollowAuthors(){let{currentUser}=useSelector(state=>state.userAuthorReducer);let[Authors,setAuthors]=useState([]);let[modifiedAuthor,setModifiedAuthor]=useState({});let[followers,setFollowers]=useState({});//get token from the local storage\nlet token=localStorage.getItem('token');//create the axios with token\nlet axiosWithToken=axios.create({headers:{Authorization:\"Bearer \".concat(token)}});const getAllAuthors=async()=>{//get http request for all authors\nlet res=await axiosWithToken.get('http://localhost:4000/author-api/authors');setAuthors(res.data.payload);};useEffect(()=>{getAllAuthors();},[]);const updateFollowStatus=async Author=>{let obj={};obj.username=currentUser.username;obj.followStatus=true;let res=await axiosWithToken.post(\"http://localhost:4000/author-api/authors/\".concat(Author.username),obj);if(res.data.message==\"Followers are updated\")setAuthors({...Author});};const updateUnfollowStatus=async Author=>{let obj={};obj.username=currentUser.username;obj.followStatus=false;let res=await axiosWithToken.post(\"http://localhost:4000/author-api/authors/\".concat(Author.username),obj);if(res.data.message==\"Followers are updated\")setAuthors({...Author});};return/*#__PURE__*/_jsx(\"div\",{children:Authors.length===0?/*#__PURE__*/_jsx(\"h2\",{className:\"text-white text-center m-3\",children:\"No Authors yet...\"}):/*#__PURE__*/_jsx(_Fragment,{children:Authors.map(obj=>/*#__PURE__*/_jsx(\"div\",{className:\"m-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card p-3 bg-light rounded-2 w-25 m-auto d-block\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"h3\",{children:obj.username}),obj.followers.followStatus==true?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary text-light\",onClick:()=>updateUnfollowStatus(obj),children:\"Unfollow\"}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info\",onClick:()=>updateFollowStatus(obj),children:\"Follow\"})]})})},obj._id))})});}export default FollowAuthors;","map":{"version":3,"names":["React","useEffect","useState","useSelector","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FollowAuthors","currentUser","state","userAuthorReducer","Authors","setAuthors","modifiedAuthor","setModifiedAuthor","followers","setFollowers","token","localStorage","getItem","axiosWithToken","create","headers","Authorization","concat","getAllAuthors","res","get","data","payload","updateFollowStatus","Author","obj","username","followStatus","post","message","updateUnfollowStatus","children","length","className","map","onClick","_id"],"sources":["C:/Users/heman/blog_app/blog_appclient/src/components/FollowAuthors.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport axios from 'axios'\r\nfunction FollowAuthors() {\r\n\r\n    let {currentUser}=useSelector(state=>state.userAuthorReducer)\r\n    let [Authors,setAuthors]=useState([])\r\n    let [modifiedAuthor,setModifiedAuthor]=useState({})\r\n    let [followers,setFollowers]=useState({})\r\n\r\n    //get token from the local storage\r\n  let token = localStorage.getItem('token')\r\n  //create the axios with token\r\n  let axiosWithToken=axios.create({\r\n      headers:{Authorization:`Bearer ${token}`}\r\n  })\r\n\r\n    const getAllAuthors= async()=>{\r\n        //get http request for all authors\r\n        let res=await axiosWithToken.get('http://localhost:4000/author-api/authors')\r\n        setAuthors(res.data.payload)\r\n    }\r\n\r\n    useEffect(()=>{\r\n        getAllAuthors()\r\n    },[])\r\n\r\n    const updateFollowStatus= async(Author)=>{\r\n        let obj={}\r\n        obj.username=currentUser.username\r\n        obj.followStatus=true\r\n        let res=await axiosWithToken.post(`http://localhost:4000/author-api/authors/${Author.username}`,obj)\r\n        if(res.data.message==\"Followers are updated\")\r\n            setAuthors({...Author})\r\n    }\r\n\r\n    const updateUnfollowStatus= async(Author)=>{\r\n        let obj={}\r\n        obj.username=currentUser.username\r\n        obj.followStatus=false\r\n        let res=await axiosWithToken.post(`http://localhost:4000/author-api/authors/${Author.username}`,obj)\r\n        if(res.data.message==\"Followers are updated\")\r\n            setAuthors({...Author})\r\n    }\r\n\r\n  return (\r\n    <div>\r\n        {Authors.length === 0?(\r\n            <h2 className='text-white text-center m-3'>No Authors yet...</h2>\r\n        ):(\r\n            <>\r\n            {\r\n                Authors.map(obj=><div className=\"m-2\" key={obj._id}>\r\n                    <div className='card p-3 bg-light rounded-2 w-25 m-auto d-block'>\r\n                        <div className='card-body d-flex justify-content-between'>\r\n                            <h3>{obj.username}</h3>\r\n                            {\r\n                            (obj.followers.followStatus==true)?\r\n                            (\r\n                                <button className='btn btn-secondary text-light' onClick={()=>updateUnfollowStatus(obj)}>Unfollow</button>\r\n                            ):(\r\n                                <button className='btn btn-info' onClick={()=>updateFollowStatus(obj)}>Follow</button>\r\n                            )\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                )\r\n            }\r\n            </>\r\n        )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FollowAuthors"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}