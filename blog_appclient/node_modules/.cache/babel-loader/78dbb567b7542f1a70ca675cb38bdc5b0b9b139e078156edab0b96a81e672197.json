{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useSelector}from'react-redux';import axios from'axios';import{useNavigate}from'react-router-dom';import{MdReadMore}from\"react-icons/md\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function ArticlesByAuthor(){let{currentUser}=useSelector(state=>state.userAuthorReducer);let[articlesList,setArticles]=useState([]);let navigate=useNavigate();//get token from the local storage\nlet token=localStorage.getItem('token');//create the axios with token\nlet axiosWithToken=axios.create({headers:{Authorization:\"Bearer \".concat(token)}});const getArticleOfCurrentAuthor=async()=>{let res=await axiosWithToken.get(\"http://localhost:4000/author-api/articles/\".concat(currentUser.username));//console.log(res)\nsetArticles(res.data.payload);//console.log(res.data.payload)\n};const getArticleContentByAuthor=async obj=>{navigate(\"../article/\".concat(obj.articleId),{state:obj});};useEffect(()=>{getArticleOfCurrentAuthor();},[]);function ISOtoUTC(iso){let date=new Date(iso).getUTCDate();let day=new Date(iso).getUTCDay();let year=new Date(iso).getUTCFullYear();return\"\".concat(date,\"/\").concat(day,\"/\").concat(year);}return/*#__PURE__*/_jsxs(\"div\",{className:\"container m-4 d-block m-auto\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center text-white m-3\",children:[currentUser.username,\"'s articles\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-5 g-4 row-cols-sm-1 row-cols-md-2 row-cols-lg-3 row \",children:articlesList.map(articleObj=>/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card h-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:articleObj.title}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:articleObj.Content.substring(0,80)+\" ....\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-info px-4 m-auto d-block\",onClick:()=>getArticleContentByAuthor(articleObj),children:[/*#__PURE__*/_jsx(MdReadMore,{className:\"fs-4\"}),\" Read More\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-footer\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-body-secondary\",children:[\"Last updated on \",ISOtoUTC(articleObj.dateOfModification)]})})]})},articleObj.id))})]});}export default ArticlesByAuthor;","map":{"version":3,"names":["React","useEffect","useState","useSelector","axios","useNavigate","MdReadMore","jsxs","_jsxs","jsx","_jsx","ArticlesByAuthor","currentUser","state","userAuthorReducer","articlesList","setArticles","navigate","token","localStorage","getItem","axiosWithToken","create","headers","Authorization","concat","getArticleOfCurrentAuthor","res","get","username","data","payload","getArticleContentByAuthor","obj","articleId","ISOtoUTC","iso","date","Date","getUTCDate","day","getUTCDay","year","getUTCFullYear","className","children","map","articleObj","title","Content","substring","onClick","dateOfModification","id"],"sources":["C:/Users/heman/blog_app/blog_appclient/src/components/ArticlesByAuthor.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport axios from 'axios'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { MdReadMore } from \"react-icons/md\";\r\nfunction ArticlesByAuthor() {\r\n\r\n    let {currentUser}=useSelector(state=>state.userAuthorReducer)\r\n    let [articlesList,setArticles]=useState([])\r\n    let navigate=useNavigate()\r\n\r\n    //get token from the local storage\r\n    let token = localStorage.getItem('token')\r\n    //create the axios with token\r\n    let axiosWithToken=axios.create({\r\n        headers:{Authorization:`Bearer ${token}`}\r\n    })\r\n\r\n    \r\n        const getArticleOfCurrentAuthor = async()=>{\r\n            let res=await axiosWithToken.get(`http://localhost:4000/author-api/articles/${currentUser.username}`)\r\n            //console.log(res)\r\n            setArticles(res.data.payload)\r\n            //console.log(res.data.payload)\r\n        }\r\n    \r\n        const getArticleContentByAuthor= async (obj)=>{\r\n            navigate(`../article/${obj.articleId}`,{state:obj})\r\n        }\r\n\r\n        useEffect(()=>{\r\n            getArticleOfCurrentAuthor()\r\n          },[])\r\n\r\n          function ISOtoUTC(iso) {\r\n            let date = new Date(iso).getUTCDate();\r\n            let day = new Date(iso).getUTCDay();\r\n            let year = new Date(iso).getUTCFullYear();\r\n            return `${date}/${day}/${year}`;\r\n          }\r\n\r\n  return (\r\n    <div className='container m-4 d-block m-auto'>\r\n    <h1 className='text-center text-white m-3'>{currentUser.username}'s articles</h1>\r\n    <div className='mt-5 g-4 row-cols-sm-1 row-cols-md-2 row-cols-lg-3 row '>\r\n        {\r\n        articlesList.map(articleObj=><div className=\"col\" key={articleObj.id}>\r\n\r\n            <div className='card h-100'>\r\n                <div className='card-body'>\r\n                    <h5 className='card-title'>{articleObj.title}</h5>\r\n                    <p  className='card-text'>\r\n                        {\r\n                            articleObj.Content.substring(0,80)+\" ....\"\r\n                        }\r\n                    </p>\r\n                    <button className='btn btn-info px-4 m-auto d-block' onClick={()=>getArticleContentByAuthor(articleObj)}><MdReadMore className='fs-4'/> Read More</button>\r\n                </div>\r\n                <div className=\"card-footer\">\r\n                <small className=\"text-body-secondary\">\r\n                  Last updated on {ISOtoUTC(articleObj.dateOfModification)}\r\n                </small>\r\n              </div>\r\n            </div>\r\n\r\n        </div>)\r\n        }\r\n    </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ArticlesByAuthor"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}